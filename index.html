<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>OM HEALTH CARE — Payment</title>

<!-- Tailwind CDN -->
<script src="https://cdn.tailwindcss.com"></script>

<style>
/* Ripple animation */
.ripple{position:relative;overflow:hidden;}
.ripple:after{
  content:"";position:absolute;border-radius:50%;transform:scale(0);
  opacity:0.25;background:rgba(0,0,0,0.2);width:120px;height:120px;
  pointer-events:none;transition:transform 600ms ease-out,opacity 600ms ease-out;
}
.ripple:active:after{transform:scale(1);opacity:0;transition:0s;}

/* Modal fade */
.backdropFade{animation:fadeIn 0.25s ease both;}
@keyframes fadeIn{from{opacity:0}to{opacity:1}}

/* Slide-up modal */
.slideUp{animation:slideUp 0.28s ease;}
@keyframes slideUp{from{opacity:0;transform:translateY(25px)}to{opacity:1;transform:translateY(0)}}

/* Loader spinner */
.loader{
  border:4px solid #e5e7eb;
  border-top-color:#6b7280;
  border-radius:50%;
  width:55px;height:55px;
  animation:spin 1s linear infinite;
}
@keyframes spin{to{transform:rotate(360deg)}}

/* Error screen styles */
.error-icon {
  width: 80px;
  height: 80px;
  background: #fee2e2;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  margin: 0 auto 20px;
  font-size: 2.5rem;
  color: #dc2626;
}

/* Enhanced grey and white theme */
.bg-custom-gray {
  background-color: #f8fafc;
}

.bg-custom-white {
  background-color: #ffffff;
}

.border-custom {
  border-color: #e2e8f0;
}

.text-custom-gray {
  color: #64748b;
}

/* Payment limit warning */
.limit-warning {
  background-color: #fffbeb;
  border: 1px solid #fcd34d;
  border-radius: 8px;
  padding: 12px;
  margin-top: 16px;
  font-size: 0.875rem;
}

/* Improved button styles */
.btn-primary {
  background-color: #4f46e5;
  color: white;
  transition: all 0.2s;
}

.btn-primary:hover {
  background-color: #4338ca;
}

.btn-secondary {
  background-color: #f1f5f9;
  color: #475569;
  transition: all 0.2s;
}

.btn-secondary:hover {
  background-color: #e2e8f0;
}

/* Bank specific styles */
.sbi-bank {
  background: linear-gradient(135deg, #4caf50, #66bb6a);
  color: white;
}

.hdfc-bank {
  background: linear-gradient(135deg, #004c8c, #0066cc);
  color: white;
}

.icici-bank {
  background: linear-gradient(135deg, #ff6b00, #ff8c00);
  color: white;
}

.axis-bank {
  background: linear-gradient(135deg, #981e32, #c12b3d);
  color: white;
}

.kotak-bank {
  background: linear-gradient(135deg, #7e22ce, #a855f7);
  color: white;
}

.pnb-bank {
  background: linear-gradient(135deg, #b91c1c, #dc2626);
  color: white;
}

.bob-bank {
  background: linear-gradient(135deg, #0d9488, #14b8a6);
  color: white;
}

.bank-of-india {
  background: linear-gradient(135deg, #1e40af, #3b82f6);
  color: white;
}

.canara-bank {
  background: linear-gradient(135deg, #f59e0b, #fbbf24);
  color: white;
}

.idbi-bank {
  background: linear-gradient(135deg, #dc2626, #ef4444);
  color: white;
}

.bank-selector {
  max-height: 300px;
  overflow-y: auto;
}

/* Responsive adjustments */
@media (max-width: 360px) {
  .text-responsive {
    font-size: 0.875rem;
  }
  
  .text-responsive-lg {
    font-size: 1.125rem;
  }
  
  .text-responsive-xl {
    font-size: 1.5rem;
  }
  
  .p-responsive {
    padding: 0.75rem;
  }
}

@media (min-width: 361px) and (max-width: 480px) {
  .text-responsive {
    font-size: 0.9rem;
  }
  
  .text-responsive-lg {
    font-size: 1.25rem;
  }
  
  .text-responsive-xl {
    font-size: 1.75rem;
  }
}

@media (min-width: 768px) {
  .text-responsive {
    font-size: 1rem;
  }
  
  .text-responsive-lg {
    font-size: 1.5rem;
  }
  
  .text-responsive-xl {
    font-size: 2.25rem;
  }
}

@media (min-width: 1024px) {
  .text-responsive {
    font-size: 1.1rem;
  }
  
  .text-responsive-lg {
    font-size: 1.75rem;
  }
  
  .text-responsive-xl {
    font-size: 3rem;
  }
}

/* Mobile-first responsive grid */
.responsive-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
  gap: 1rem;
}

.responsive-grid-2 {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
  gap: 0.75rem;
}

.responsive-grid-3 {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
  gap: 0.5rem;
}

/* Touch-friendly sizes for mobile */
@media (max-width: 768px) {
  .touch-button {
    min-height: 44px;
    padding: 12px 16px;
  }
  
  .touch-target {
    min-width: 44px;
    min-height: 44px;
  }
}

/* Landscape mode adjustments */
@media (max-height: 500px) and (orientation: landscape) {
  .landscape-compact {
    padding-top: 1rem;
    padding-bottom: 1rem;
  }
  
  .landscape-hidden {
    display: none;
  }
}

/* High DPI screens */
@media (-webkit-min-device-pixel-ratio: 2), (min-resolution: 192dpi) {
  .high-dpi-sharp {
    image-rendering: -webkit-optimize-contrast;
    image-rendering: crisp-edges;
  }
}

/* Very small screens (iPhone SE, etc) */
@media (max-width: 320px) {
  .xs-screen {
    padding-left: 0.5rem;
    padding-right: 0.5rem;
  }
  
  .xs-text {
    font-size: 0.8rem;
  }
}

/* Large screens (desktops) */
@media (min-width: 1440px) {
  .xl-screen {
    max-width: 1200px;
    margin-left: auto;
    margin-right: auto;
  }
}

/* Tablet optimizations */
@media (min-width: 768px) and (max-width: 1024px) {
  .tablet-optimized {
    padding: 2rem;
  }
}

/* Foldable devices */
@media (max-width: 280px) {
  .foldable-optimized {
    padding: 0.25rem;
  }
}
</style>
</head>

<body class="bg-custom-gray min-h-screen">

<!-- MAIN APP -->
<div id="app" class="min-h-screen flex flex-col">

  <!-- HEADER -->
  <header class="bg-custom-white shadow-md rounded-b-2xl landscape-compact">
    <div class="max-w-6xl mx-auto px-4 xs-screen:p-responsive sm:px-6 lg:px-8 py-4 sm:py-6 flex items-center gap-3 sm:gap-4">
      <img src="Screenshot 2025-09-07 173907.png" alt="OM HEALTH CARE Logo" class="w-16 h-16 sm:w-20 sm:h-20 rounded-lg object-contain border border-custom high-dpi-sharp">
      <div class="flex-1 min-w-0">
        <h1 class="text-responsive-lg sm:text-xl lg:text-2xl font-semibold text-gray-800 truncate">OM HEALTH CARE</h1>
        <p class="text-xs xs-text sm:text-sm text-custom-gray truncate">Medicine & General Store</p>
      </div>
    </div>
  </header>

  <!-- MAIN -->
  <main class="flex-1 flex items-center justify-center px-3 xs-screen:px-4 sm:px-6 py-4 sm:py-8 landscape-compact">
    <div class="w-full max-w-6xl xl-screen">

      <section class="bg-custom-white rounded-2xl shadow-lg p-4 sm:p-6 lg:p-8 border border-custom">
        <div class="flex flex-col lg:flex-row items-center gap-4 sm:gap-6">
          <div class="flex-1 w-full">
            <p class="text-responsive text-custom-gray">Payable Amount</p>
            <h2 class="mt-2 sm:mt-3 text-responsive-xl lg:text-4xl font-bold text-gray-900">₹ <span id="amountDisplay">1.00</span></h2>
            
            <!-- Product Information -->
            <div class="mt-3 sm:mt-4 p-3 bg-gray-50 rounded-lg">
              <h3 class="font-medium text-gray-700 text-responsive">Fortifier Vitamin</h3>
              <p class="text-xs xs-text sm:text-sm text-custom-gray mt-1">Payment to: OM HEALTH CARE</p>
              <p class="text-xs text-custom-gray mt-1">UPI ID: bhaveshsutharb830@okhdfcbank</p>
            </div>
            
            <!-- Payment Limit Warning -->
            <div class="limit-warning landscape-hidden">
              <div class="flex items-start">
                <svg class="w-4 h-4 sm:w-5 sm:h-5 text-amber-500 mt-0.5 mr-2 flex-shrink-0" fill="currentColor" viewBox="0 0 20 20">
                  <path fill-rule="evenodd" d="M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z" clip-rule="evenodd"></path>
                </svg>
                <div>
                  <p class="font-medium text-amber-800 text-responsive">Bank Transaction Limit</p>
                  <p class="text-amber-700 mt-1 text-xs xs-text sm:text-sm">You may encounter payment limits with your bank. If payment fails, try a smaller amount or contact your bank.</p>
                </div>
              </div>
            </div>
          </div>

          <div class="w-full lg:w-80 xl:w-96">
            <button id="payNow"
              class="ripple touch-button w-full btn-primary py-3 sm:py-4 rounded-xl shadow-md text-responsive lg:text-lg font-semibold active:scale-[0.97] transition">
              Pay Now
            </button>
          </div>
        </div>
      </section>

      <!-- UPI Logos -->
      <div class="mt-4 sm:mt-6 responsive-grid-3 lg:grid-cols-3 gap-3 sm:gap-4">
        <div class="bg-custom-white p-3 sm:p-4 rounded-2xl shadow flex items-center gap-3 border border-custom">
          <img src="Screenshot 2025-11-15 224710.png" alt="Google Pay" class="w-8 h-8 sm:w-10 sm:h-10 lg:w-12 lg:h-12 rounded high-dpi-sharp">
          <div><div class="font-semibold text-gray-700 text-xs sm:text-sm lg:text-base">Google Pay</div></div>
        </div>

        <div class="bg-custom-white p-3 sm:p-4 rounded-2xl shadow flex items-center gap-3 border border-custom">
          <img src="Screenshot 2025-11-15 224740.png" alt="PhonePe" class="w-8 h-8 sm:w-10 sm:h-10 lg:w-12 lg:h-12 rounded high-dpi-sharp">
          <div><div class="font-semibold text-gray-700 text-xs sm:text-sm lg:text-base">PhonePe</div></div>
        </div>

        <div class="bg-custom-white p-3 sm:p-4 rounded-2xl shadow flex items-center gap-3 border border-custom">
          <img src="Screenshot 2025-11-15 224857.png" alt="Paytm UPI" class="w-8 h-8 sm:w-10 sm:h-10 lg:w-12 lg:h-12 rounded high-dpi-sharp">
          <div><div class="font-semibold text-gray-700 text-xs sm:text-sm lg:text-base">Paytm UPI</div></div>
        </div>
      </div>

      <p class="text-center text-xs xs-text sm:text-sm text-custom-gray mt-3 sm:mt-4">
        UPI ID: <b id="upiShown">bhaveshsutharb830@okhdfcbank</b>
      </p>

    </div>
  </main>
</div>

<!-- PAYMENT POPUP -->
<div id="paymentModal"
  class="fixed inset-0 z-40 hidden items-center justify-center backdropFade p-3 xs-screen:p-4">

  <div class="absolute inset-0 bg-black/50 backdrop-blur-sm"></div>

  <div class="relative w-full max-w-lg mx-auto slideUp bg-custom-white rounded-2xl p-4 sm:p-6 shadow-xl border border-custom max-h-[90vh] overflow-y-auto">

    <div class="flex justify-between items-start">
      <div class="flex-1 min-w-0">
        <h3 class="text-lg sm:text-xl font-semibold text-gray-800 truncate">Choose Payment Method</h3>
        <p class="text-xs sm:text-sm text-custom-gray mt-1">Tap an app to pay ₹1.00</p>
      </div>
      <button id="closeModal" class="touch-target text-gray-400 hover:text-gray-600 transition ml-2 flex-shrink-0">✕</button>
    </div>

    <!-- Payment Tabs -->
    <div class="flex border-b border-gray-200 mt-3 sm:mt-4">
      <button id="upiTab" class="flex-1 py-2 px-2 sm:px-4 text-center font-medium border-b-2 border-blue-500 text-blue-600 text-responsive">
        UPI Apps
      </button>
      <button id="bankTab" class="flex-1 py-2 px-2 sm:px-4 text-center font-medium text-gray-500 hover:text-gray-700 text-responsive">
        Net Banking
      </button>
    </div>

    <!-- UPI Apps Section -->
    <div id="upiSection" class="mt-3 sm:mt-4">
      <div class="responsive-grid-2 gap-2 sm:gap-3">
        <button class="upiBtn ripple touch-button bg-gray-50 p-3 sm:p-4 rounded-xl flex items-center gap-2 sm:gap-3 border border-custom hover:border-indigo-300 transition" data-app="gpay">
          <img src="Screenshot 2025-11-15 224710.png" alt="Google Pay" class="w-8 h-8 sm:w-10 sm:h-10 lg:w-12 lg:h-12 high-dpi-sharp">
          <div><div class="font-semibold text-xs sm:text-sm">GPay</div></div>
        </button>

        <button class="upiBtn ripple touch-button bg-gray-50 p-3 sm:p-4 rounded-xl flex items-center gap-2 sm:gap-3 border border-custom hover:border-indigo-300 transition" data-app="phonepe">
          <img src="Screenshot 2025-11-15 224740.png" alt="PhonePe" class="w-8 h-8 sm:w-10 sm:h-10 lg:w-12 lg:h-12 high-dpi-sharp">
          <div><div class="font-semibold text-xs sm:text-sm">PhonePe</div></div>
        </button>

        <button class="upiBtn ripple touch-button bg-gray-50 p-3 sm:p-4 rounded-xl flex items-center gap-2 sm:gap-3 border border-custom hover:border-indigo-300 transition" data-app="paytm">
          <img src="Screenshot 2025-11-15 224857.png" alt="Paytm" class="w-8 h-8 sm:w-10 sm:h-10 lg:w-12 lg:h-12 high-dpi-sharp">
          <div><div class="font-semibold text-xs sm:text-sm">Paytm</div></div>
        </button>

        <button class="upiBtn ripple touch-button bg-gray-50 p-3 sm:p-4 rounded-xl flex items-center gap-2 sm:gap-3 border border-custom hover:border-indigo-300 transition" data-app="bhim">
          <img src="Screenshot 2025-11-15 224809.png" alt="BHIM" class="w-8 h-8 sm:w-10 sm:h-10 lg:w-12 lg:h-12 high-dpi-sharp">
          <div><div class="font-semibold text-xs sm:text-sm">BHIM</div></div>
        </button>
      </div>

      <p class="text-xs text-custom-gray text-center mt-2 sm:mt-3 break-all">
        UPI ID: <b>bhaveshsutharb830@okhdfcbank</b>
      </p>

      <!-- QR Code -->
      <div class="mt-4 sm:mt-6 text-center">
        <h3 class="text-responsive-lg sm:text-lg font-semibold text-gray-700">OR Scan QR</h3>
        <img id="upiQR" alt="UPI QR Code" class="mx-auto mt-2 sm:mt-3 w-40 h-40 sm:w-48 sm:h-48 lg:w-52 lg:h-52 rounded-xl shadow border border-custom high-dpi-sharp">
        <p class="text-xs text-custom-gray mt-2">Scan using any UPI app</p>
      </div>
    </div>

    <!-- Net Banking Section -->
    <div id="bankSection" class="mt-3 sm:mt-4 hidden">
      <div class="bank-selector responsive-grid-2 gap-2 sm:gap-3">
        <!-- Major Indian Banks -->
        <button class="bankBtn ripple touch-button sbi-bank p-2 sm:p-3 rounded-xl flex items-center gap-2 border border-custom transition" data-bank="sbi">
          <div class="w-8 h-8 sm:w-10 sm:h-10 bg-white rounded-lg flex items-center justify-center">
            <span class="text-green-600 font-bold text-xs sm:text-sm">SBI</span>
          </div>
          <div class="text-left">
            <div class="font-semibold text-white text-xs sm:text-sm">SBI</div>
          </div>
        </button>

        <button class="bankBtn ripple touch-button hdfc-bank p-2 sm:p-3 rounded-xl flex items-center gap-2 border border-custom transition" data-bank="hdfc">
          <div class="w-8 h-8 sm:w-10 sm:h-10 bg-white rounded-lg flex items-center justify-center">
            <span class="text-blue-600 font-bold text-xs sm:text-sm">HDFC</span>
          </div>
          <div class="text-left">
            <div class="font-semibold text-white text-xs sm:text-sm">HDFC</div>
          </div>
        </button>

        <button class="bankBtn ripple touch-button icici-bank p-2 sm:p-3 rounded-xl flex items-center gap-2 border border-custom transition" data-bank="icici">
          <div class="w-8 h-8 sm:w-10 sm:h-10 bg-white rounded-lg flex items-center justify-center">
            <span class="text-orange-600 font-bold text-xs sm:text-sm">ICICI</span>
          </div>
          <div class="text-left">
            <div class="font-semibold text-white text-xs sm:text-sm">ICICI</div>
          </div>
        </button>

        <button class="bankBtn ripple touch-button axis-bank p-2 sm:p-3 rounded-xl flex items-center gap-2 border border-custom transition" data-bank="axis">
          <div class="w-8 h-8 sm:w-10 sm:h-10 bg-white rounded-lg flex items-center justify-center">
            <span class="text-red-600 font-bold text-xs sm:text-sm">AXIS</span>
          </div>
          <div class="text-left">
            <div class="font-semibold text-white text-xs sm:text-sm">Axis</div>
          </div>
        </button>

        <button class="bankBtn ripple touch-button kotak-bank p-2 sm:p-3 rounded-xl flex items-center gap-2 border border-custom transition" data-bank="kotak">
          <div class="w-8 h-8 sm:w-10 sm:h-10 bg-white rounded-lg flex items-center justify-center">
            <span class="text-purple-600 font-bold text-xs sm:text-sm">KOTAK</span>
          </div>
          <div class="text-left">
            <div class="font-semibold text-white text-xs sm:text-sm">Kotak</div>
          </div>
        </button>

        <button class="bankBtn ripple touch-button pnb-bank p-2 sm:p-3 rounded-xl flex items-center gap-2 border border-custom transition" data-bank="pnb">
          <div class="w-8 h-8 sm:w-10 sm:h-10 bg-white rounded-lg flex items-center justify-center">
            <span class="text-red-600 font-bold text-xs sm:text-sm">PNB</span>
          </div>
          <div class="text-left">
            <div class="font-semibold text-white text-xs sm:text-sm">PNB</div>
          </div>
        </button>

        <button class="bankBtn ripple touch-button bob-bank p-2 sm:p-3 rounded-xl flex items-center gap-2 border border-custom transition" data-bank="bob">
          <div class="w-8 h-8 sm:w-10 sm:h-10 bg-white rounded-lg flex items-center justify-center">
            <span class="text-teal-600 font-bold text-xs sm:text-sm">BOB</span>
          </div>
          <div class="text-left">
            <div class="font-semibold text-white text-xs sm:text-sm">BOB</div>
          </div>
        </button>

        <button class="bankBtn ripple touch-button bank-of-india p-2 sm:p-3 rounded-xl flex items-center gap-2 border border-custom transition" data-bank="boi">
          <div class="w-8 h-8 sm:w-10 sm:h-10 bg-white rounded-lg flex items-center justify-center">
            <span class="text-blue-600 font-bold text-xs sm:text-sm">BOI</span>
          </div>
          <div class="text-left">
            <div class="font-semibold text-white text-xs sm:text-sm">BOI</div>
          </div>
        </button>
      </div>

      <p class="text-xs text-custom-gray text-center mt-2 sm:mt-3">
        Select your bank to open Net Banking app
      </p>
    </div>

  </div>
</div>

<!-- LOADER -->
<div id="loaderScreen"
  class="fixed inset-0 hidden z-50 bg-custom-white flex flex-col items-center justify-center p-4">

  <div class="loader"></div>

  <p class="mt-4 sm:mt-6 text-gray-700 font-medium text-responsive-lg text-center" id="loaderText">Opening payment app…</p>
  <p class="text-xs sm:text-sm text-custom-gray mt-1 text-center">Do not close this screen</p>

  <button id="retryBtn"
    class="hidden mt-4 sm:mt-6 px-4 sm:px-5 py-2 btn-primary rounded-lg text-xs sm:text-sm shadow ripple touch-button">
    Didn't open? Try Again
  </button>

  <!-- Manual Instructions -->
  <div id="manualInstructions" class="hidden mt-3 sm:mt-4 text-center max-w-sm">
    <p class="text-xs sm:text-sm text-gray-600 font-medium text-center" id="instructionTitle">Manual Payment Instructions:</p>
    <div id="instructionContent" class="text-xs text-gray-500 mt-2 text-left"></div>
  </div>
</div>

<!-- ERROR SCREEN -->
<div id="errorScreen"
  class="fixed inset-0 hidden z-50 bg-custom-white flex items-center justify-center p-3 xs-screen:p-4">

  <div class="text-center max-w-md w-full">
    <div class="error-icon mx-auto">
      <i class="fas fa-exclamation-triangle">⚠️</i>
    </div>

    <h2 class="mt-4 sm:mt-6 text-xl sm:text-2xl font-semibold text-gray-800">Payment Failed</h2>

    <p class="mt-2 sm:mt-3 text-custom-gray text-responsive text-center" id="errorMessage">
      You've exceeded the bank limit for this payment.
    </p>
    
    <div class="mt-3 sm:mt-4 p-3 bg-red-50 rounded-lg text-left">
      <p class="text-xs sm:text-sm font-medium text-red-800">Possible reasons:</p>
      <ul class="text-xs text-red-700 mt-1 list-disc list-inside space-y-1">
        <li>Daily transaction limit exceeded</li>
        <li>Insufficient balance in your account</li>
        <li>Bank server is temporarily down</li>
      </ul>
    </div>

    <div class="mt-4 sm:mt-6 flex flex-col sm:flex-row gap-2 sm:gap-3">
      <button id="tryOtherAppBtn"
        class="flex-1 btn-secondary px-4 py-3 rounded-xl shadow ripple touch-button text-responsive">
        Try Another App
      </button>
      <button id="retryPaymentBtn"
        class="flex-1 btn-primary px-4 py-3 rounded-xl shadow ripple touch-button text-responsive">
        Retry Payment
      </button>
    </div>
  </div>
</div>

<!-- SUCCESS -->
<div id="successScreen"
  class="fixed inset-0 hidden z-50 bg-custom-white flex items-center justify-center p-3 xs-screen:p-4">

  <div class="text-center max-w-md w-full">
    <div class="w-24 h-24 sm:w-32 sm:h-32 lg:w-40 lg:h-40 rounded-full bg-emerald-50 flex items-center justify-center mx-auto border border-emerald-200">
      <div class="text-4xl sm:text-5xl lg:text-6xl text-emerald-600 font-bold">✓</div>
    </div>

    <h2 class="mt-4 sm:mt-6 text-xl sm:text-2xl font-semibold text-gray-800">Payment Successful</h2>

    <p class="mt-2 sm:mt-3 text-custom-gray text-responsive text-center">
      Thank you — payment to <b>OM HEALTH CARE</b> received.
    </p>
    
    <div class="mt-3 sm:mt-4 p-3 bg-green-50 rounded-lg inline-block">
      <p class="text-xs sm:text-sm font-medium text-green-800">Transaction ID: <span class="font-mono text-xs" id="transactionId">TXN${Date.now().toString().slice(-8)}</span></p>
    </div>

    <button id="doneBtn"
      class="mt-4 sm:mt-6 bg-emerald-600 text-white px-4 sm:px-6 py-2 sm:py-3 rounded-xl shadow ripple active:scale-[0.97] transition touch-button text-responsive">
      Done
    </button>
  </div>
</div>

<!-- SUCCESS SOUND -->
<audio id="successSound">
  <source src="data:audio/mp3;base64,SUQzBAAAAAAAI1RTU0UAAAAPAAADTGF2ZjU2LjMyLjEwNAAAAAAAAAAAAAAA" type="audio/mp3">
</audio>

<script>
const UPI_ID = "bhaveshsutharb830@okhdfcbank";
const AMOUNT = 1.00;

document.getElementById('upiShown').textContent = UPI_ID;
document.getElementById('amountDisplay').textContent = AMOUNT.toFixed(2);

// Bank Deep Links Configuration
const BANK_DEEP_LINKS = {
  'sbi': {
    link: 'yonosbi://main',
    package: 'com.sbi.lotusintouch',
    name: 'SBI YONO',
    instructions: 'Open YONO SBI → Go to Payments → UPI Money Transfer → Send to UPI ID'
  },
  'hdfc': {
    link: 'hdfc://netbanking',
    package: 'com.hdfc.bank',
    name: 'HDFC NetBanking',
    instructions: 'Open HDFC NetBanking → Fund Transfer → UPI Payment → Send to UPI ID'
  },
  'icici': {
    link: 'icicibank://main',
    package: 'com.icici.bankapp',
    name: 'ICICI iMobile',
    instructions: 'Open iMobile → Payments & Transfers → Send to UPI ID'
  },
  'axis': {
    link: 'axisbank://app',
    package: 'com.axis.mobile',
    name: 'Axis Mobile',
    instructions: 'Open Axis Mobile → Pay → UPI Payment → Send to UPI ID'
  },
  'kotak': {
    link: 'kotak://app',
    package: 'com.kotak.mahindra.bank',
    name: 'Kotak Mobile Banking',
    instructions: 'Open Kotak App → Pay → UPI Payment → Send to UPI ID'
  },
  'pnb': {
    link: 'pnb://mobile',
    package: 'com.pnbindia.mobilebanking',
    name: 'PNB ONE',
    instructions: 'Open PNB ONE → Payments → UPI Payment → Send to UPI ID'
  },
  'bob': {
    link: 'bobworld://main',
    package: 'com.bob.fingps',
    name: 'BOB World',
    instructions: 'Open BOB World → Pay → UPI Payment → Send to UPI ID'
  },
  'boi': {
    link: 'boimobile://app',
    package: 'com.bankofindia.mobile',
    name: 'BOI Mobile',
    instructions: 'Open BOI Mobile → Fund Transfer → UPI Payment → Send to UPI ID'
  }
};

// UPI Apps Deep Links
const UPI_DEEP_LINKS = {
  'gpay': 'tez://upi/pay?pa=' + UPI_ID + '&pn=OM%20HEALTH%20CARE&am=' + AMOUNT.toFixed(2) + '&cu=INR',
  'phonepe': 'phonepe://pay?pa=' + UPI_ID + '&pn=OM%20HEALTH%20CARE&am=' + AMOUNT.toFixed(2) + '&cu=INR',
  'paytm': 'paytmmp://pay?pa=' + UPI_ID + '&pn=OM%20HEALTH%20CARE&am=' + AMOUNT.toFixed(2) + '&cu=INR',
  'bhim': 'bhim://pay?pa=' + UPI_ID + '&pn=OM%20HEALTH%20CARE&am=' + AMOUNT.toFixed(2) + '&cu=INR'
};

// DOM Elements
const payNow = document.getElementById("payNow");
const paymentModal = document.getElementById("paymentModal");
const closeModal = document.getElementById("closeModal");
const upiTab = document.getElementById("upiTab");
const bankTab = document.getElementById("bankTab");
const upiSection = document.getElementById("upiSection");
const bankSection = document.getElementById("bankSection");
const upiBtns = document.querySelectorAll(".upiBtn");
const bankBtns = document.querySelectorAll(".bankBtn");
const loaderScreen = document.getElementById("loaderScreen");
const loaderText = document.getElementById("loaderText");
const retryBtn = document.getElementById("retryBtn");
const manualInstructions = document.getElementById("manualInstructions");
const instructionTitle = document.getElementById("instructionTitle");
const instructionContent = document.getElementById("instructionContent");
const successScreen = document.getElementById("successScreen");
const errorScreen = document.getElementById("errorScreen");
const successSound = document.getElementById("successSound");
const doneBtn = document.getElementById("doneBtn");
const tryOtherAppBtn = document.getElementById("tryOtherAppBtn");
const retryPaymentBtn = document.getElementById("retryPaymentBtn");
const transactionId = document.getElementById("transactionId");

// Event Listeners
payNow.onclick = () => paymentModal.classList.remove("hidden");
closeModal.onclick = () => paymentModal.classList.add("hidden");

// Tab Switching
upiTab.onclick = () => {
  upiTab.classList.add('border-blue-500', 'text-blue-600');
  bankTab.classList.remove('border-blue-500', 'text-blue-600');
  bankTab.classList.add('text-gray-500');
  upiSection.classList.remove('hidden');
  bankSection.classList.add('hidden');
};

bankTab.onclick = () => {
  bankTab.classList.add('border-blue-500', 'text-blue-600');
  upiTab.classList.remove('border-blue-500', 'text-blue-600');
  upiTab.classList.add('text-gray-500');
  bankSection.classList.remove('hidden');
  upiSection.classList.add('hidden');
};

function buildUPILink() {
  return `upi://pay?pa=${encodeURIComponent(UPI_ID)}&pn=OM%20HEALTH%20CARE&am=${AMOUNT.toFixed(2)}&cu=INR&tn=Payment%20to%20OM%20HEALTH%20CARE&tr=TXN${Date.now()}`;
}

function showLoader(message, showInstructions = false) {
  loaderScreen.classList.remove("hidden");
  retryBtn.classList.add("hidden");
  manualInstructions.classList.add("hidden");
  loaderText.textContent = message;
  
  if (showInstructions) {
    setTimeout(() => {
      manualInstructions.classList.remove("hidden");
    }, 2000);
  }
}

function hideLoader() {
  loaderScreen.classList.add("hidden");
}

function openDeepLink(deepLink, fallbackInstructions, appName) {
  showLoader(`Opening ${appName}...`, true);
  
  // Set manual instructions
  instructionTitle.textContent = `If ${appName} doesn't open:`;
  instructionContent.innerHTML = `
    <p class="mb-2">1. Open ${appName} manually</p>
    <p class="mb-2">2. ${fallbackInstructions}</p>
    <p class="mb-1">3. Use UPI ID: <span class="font-mono bg-gray-100 px-1 rounded">${UPI_ID}</span></p>
    <p>4. Amount: <span class="font-mono bg-gray-100 px-1 rounded">₹${AMOUNT.toFixed(2)}</span></p>
  `;
  
  // Try to open deep link
  setTimeout(() => {
    window.location.href = deepLink;
  }, 1000);
  
  // Show retry button after 5 seconds
  setTimeout(() => {
    retryBtn.classList.remove("hidden");
  }, 5000);
}

function tryOpenUPI(appName) {
  const upiLink = UPI_DEEP_LINKS[appName];
  if (upiLink) {
    openDeepLink(upiLink, 'Go to UPI Payments and send money to UPI ID', appName.toUpperCase());
    localStorage.setItem("paymentStarted", "1");
    localStorage.setItem("lastAppType", "upi");
    localStorage.setItem("lastAppCode", appName);
  }
}

function tryOpenBank(bankCode) {
  const bank = BANK_DEEP_LINKS[bankCode];
  if (bank) {
    openDeepLink(bank.link, bank.instructions, bank.name);
    localStorage.setItem("paymentStarted", "1");
    localStorage.setItem("lastAppType", "bank");
    localStorage.setItem("lastAppCode", bankCode);
  }
}

// UPI Button Events
upiBtns.forEach(btn => {
  btn.onclick = () => {
    const appName = btn.getAttribute('data-app');
    paymentModal.classList.add("hidden");
    tryOpenUPI(appName);
  };
});

// Bank Button Events
bankBtns.forEach(btn => {
  btn.onclick = () => {
    const bankCode = btn.getAttribute('data-bank');
    paymentModal.classList.add("hidden");
    tryOpenBank(bankCode);
  };
});

// Retry button
retryBtn.onclick = () => {
  const lastApp = localStorage.getItem('lastAppType');
  const lastCode = localStorage.getItem('lastAppCode');
  
  if (lastApp === 'bank') {
    tryOpenBank(lastCode);
  } else {
    tryOpenUPI(lastCode);
  }
};

// Try another app button
tryOtherAppBtn.onclick = () => {
  errorScreen.classList.add("hidden");
  paymentModal.classList.remove("hidden");
};

// Retry payment button
retryPaymentBtn.onclick = () => {
  errorScreen.classList.add("hidden");
  const lastApp = localStorage.getItem('lastAppType');
  const lastCode = localStorage.getItem('lastAppCode');
  
  if (lastApp === 'bank') {
    tryOpenBank(lastCode);
  } else {
    tryOpenUPI(lastCode);
  }
};

// Handle app focus (when user returns from payment app)
window.addEventListener("focus", () => {
  if (localStorage.getItem("paymentStarted") === "1") {
    localStorage.removeItem("paymentStarted");
    hideLoader();
    
    // For demo, randomly show success or failure
    if (Math.random() > 0.3) {
      showSuccess();
    } else {
      showError("Transaction failed. Please try again.");
    }
  }
});

function showSuccess() {
  successScreen.classList.remove("hidden");
  transactionId.textContent = `TXN${Date.now().toString().slice(-8)}`;
  successSound.play().catch(()=>{});
  if (navigator.vibrate) navigator.vibrate([40, 30, 40]);
}

function showError(message) {
  errorScreen.classList.remove("hidden");
  document.getElementById("errorMessage").textContent = message;
}

doneBtn.onclick = () => {
  successScreen.classList.add("hidden");
};

function generateQR() {
  const upiData = buildUPILink();
  document.getElementById("upiQR").src =
    "https://api.qrserver.com/v1/create-qr-code/?size=300x300&data=" + encodeURIComponent(upiData);
}

// Initialize the QR code
generateQR();

// Handle orientation changes
window.addEventListener('orientationchange', function() {
  setTimeout(() => {
    window.scrollTo(0, 0);
  }, 100);
});

// Handle resize events
window.addEventListener('resize', function() {
  // Force reflow for better rendering
  document.body.style.overflow = 'hidden';
  setTimeout(() => {
    document.body.style.overflow = '';
  }, 100);
});
</script>

</body>
</html>
