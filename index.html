<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>OM HEALTH CARE - Payment</title>
<style>
:root{
  --bg:#ececec;--card:#fff;--text:#222;--muted:#777;--accent:#3d3d3d;
  --radius:16px;--shadow:0 10px 30px rgba(0,0,0,0.10);--success:#2ecc71;
}
*{box-sizing:border-box;font-family:Arial,system-ui,-apple-system;}
body{margin:0;background:var(--bg);color:var(--text);-webkit-font-smoothing:antialiased;}
.container{max-width:520px;margin:18px auto;padding:18px;}
.header{background:var(--card);padding:26px;border-radius:var(--radius);text-align:center;box-shadow:var(--shadow)}
.header img{width:96px;border-radius:12px;display:block;margin:0 auto 10px}
.header h1{margin:0;font-size:22px}
.header p{margin:6px 0 0;color:var(--muted)}
.amount-card{margin-top:18px;background:var(--card);padding:26px;border-radius:var(--radius);box-shadow:var(--shadow);text-align:center}
.amount-card p{margin:0;color:var(--muted)}
.amount-card h2{font-size:32px;margin:8px 0 0}
.pay-btn{display:block;width:100%;background:var(--accent);color:#fff;padding:14px;border-radius:12px;border:none;font-size:18px;margin-top:18px;cursor:pointer}
.popup-bg{position:fixed;inset:0;background:rgba(0,0,0,0.55);display:none;align-items:center;justify-content:center;padding:18px}
.popup{width:100%;max-width:440px;background:#fff;border-radius:14px;padding:18px;box-shadow:var(--shadow);animation:fadeUp .28s ease}
@keyframes fadeUp{from{opacity:0;transform:translateY(18px)}to{opacity:1;transform:translateY(0)}}
.close{float:right;color:var(--muted);cursor:pointer}
.upi-title{font-weight:700;color:var(--accent);margin-bottom:6px}
.upi-grid{display:grid;grid-template-columns:repeat(2,1fr);gap:12px;margin-top:12px}
.upi-btn{display:flex;align-items:center;gap:10px;padding:10px;border-radius:12px;border:1px solid #e6e6e6;background:var(--bg);cursor:pointer}
.upi-btn img{width:44px;height:44px;object-fit:contain;border-radius:8px}
.footer-note{margin-top:12px;color:var(--muted);font-size:13px;text-align:center}

/* success */
#successPage{display:none;text-align:center;padding-top:60px;animation:fadeUp .4s ease}
.success-circle{width:150px;height:150px;border-radius:50%;background:#eafff2;margin:0 auto 18px;display:flex;align-items:center;justify-content:center;animation:pop .55s ease-out}
@keyframes pop{0%{transform:scale(.3);opacity:0}80%{transform:scale(1.08);opacity:1}100%{transform:scale(1)}}
.success-tick{font-size:84px;color:var(--success);font-weight:700}
.small-muted{color:var(--muted);font-size:15px;margin-top:8px}

/* responsive */
@media(max-width:420px){.header img{width:80px}.amount-card h2{font-size:28px}.upi-btn img{width:40px;height:40px}}
</style>
</head>
<body>

<!-- SUCCESS -->
<div id="successPage">
  <div class="success-circle"><div class="success-tick">✓</div></div>
  <h2>Payment Successful</h2>
  <div class="small-muted">Thank you — payment to <strong>OM HEALTH CARE</strong> received.</div>
</div>

<!-- MAIN -->
<div id="mainPage" class="container">
  <div class="header">
    <img src="Screenshot 2025-09-07 173907.png" alt="OM HEALTH CARE Logo" />
    <h1>OM HEALTH CARE</h1>
    <p>Medicine &amp; General Store</p>
  </div>

  <div class="amount-card">
    <p>Payable Amount</p>
    <h2 id="amountDisplay">₹ 1.00</h2>
  </div>

  <button class="pay-btn" id="payNow">Pay Now</button>
</div>

<!-- POPUP -->
<div id="popup" class="popup-bg" aria-hidden="true">
  <div class="popup" role="dialog" aria-modal="true" aria-labelledby="payTitle">
    <div style="display:flex;align-items:center;justify-content:space-between">
      <div>
        <div id="payTitle" class="upi-title">Pay Using UPI</div>
      </div>
      <div class="close" id="closePopup" title="Close">✖</div>
    </div>

    <div class="upi-grid" style="margin-top:8px">
      <div class="upi-btn" id="btn-gpay">
        <img src="Screenshot 2025-11-15 224710.png" alt="GPay">
        <div><strong>Google Pay</strong><div style="font-size:12px;color:var(--muted)">Open GPay</div></div>
      </div>

      <div class="upi-btn" id="btn-phonepe">
        <img src="Screenshot 2025-11-15 224740.png" alt="PhonePe">
        <div><strong>PhonePe</strong><div style="font-size:12px;color:var(--muted)">Open PhonePe</div></div>
      </div>

      <div class="upi-btn" id="btn-paytm">
        <img src="Screenshot 2025-11-15 224857.png" alt="Paytm">
        <div><strong>Paytm</strong><div style="font-size:12px;color:var(--muted)">Open Paytm</div></div>
      </div>

      <div class="upi-btn" id="btn-bhim">
        <img src="Screenshot 2025-11-15 224809.png" alt="BHIM">
        <div><strong>BHIM UPI</strong><div style="font-size:12px;color:var(--muted)">Open BHIM</div></div>
      </div>
    </div>

    <div class="footer-note">UPI ID: <strong>bhaveshsutharb830@okhdfcbank</strong></div>
  </div>
</div>

<!-- embedded short ding sound (base64 small mp3) -->
<audio id="successSound" preload="auto">
  <source src="data:audio/mp3;base64,SUQzBAAAAAAAI1RTU0UAAAAPAAADTGF2ZjU2LjMyLjEwNAAAAAAAAAAAAAAA" type="audio/mp3">
</audio>

<script>
/* ------------- CONFIG ------------- */
const AMOUNT = 1.00;                 // change here if needed (use number)
const UPI_ID = "bhaveshsutharb830@okhdfcbank";
const RECIPIENT = "OM HEALTH CARE";

/* format amount to 2 decimals */
function formatAmount(n){
  return Number(n).toFixed(2);
}

/* DOM */
const popup = document.getElementById('popup');
const payNow = document.getElementById('payNow');
const closeBtn = document.getElementById('closePopup');
const mainPage = document.getElementById('mainPage');
const successPage = document.getElementById('successPage');
const successSound = document.getElementById('successSound');
const amountDisplay = document.getElementById('amountDisplay');

amountDisplay.textContent = "₹ " + formatAmount(AMOUNT);

/* open popup */
payNow.addEventListener('click', ()=> {
  popup.style.display = 'flex';
  popup.setAttribute('aria-hidden','false');
});

/* close popup */
closeBtn.addEventListener('click', ()=> {
  popup.style.display = 'none';
  popup.setAttribute('aria-hidden','true');
});

/* build UPI URI in a safe way with encoding and tr (transaction ref)*/
function buildUpiUri(appId){
  // transaction reference - unique
  const tr = 'txn' + Date.now();
  // build params
  const params = new URLSearchParams({
    pa: UPI_ID,
    pn: RECIPIENT,
    am: formatAmount(AMOUNT),
    cu: 'INR',
    tn: 'Payment to ' + RECIPIENT,
    tr: tr
  });
  return 'upi://pay?' + params.toString();
}

/* Try to open UPI app (universal upi link) */
function openUpi() {
  const uri = buildUpiUri();
  // mark that payment flow started
  try { localStorage.setItem('paymentInProgress','1'); } catch(e){}

  // Attempt to open - on mobile devices this will hand to the UPI app
  window.location.href = uri;
}

/* Attach to each UPI button (they all open universal upi:// link) */
['btn-gpay','btn-phonepe','btn-paytm','btn-bhim'].forEach(id=>{
  const el = document.getElementById(id);
  if(el) el.addEventListener('click', openUpi);
});

/* Real-time detection: when user returns to page after attempting payment */
window.addEventListener('focus', ()=> {
  // If payment started earlier, assume user returned from UPI app -> show success.
  // Note: we can't verify payment status without server callbacks; this is a front-end best-effort.
  try {
    if(localStorage.getItem('paymentInProgress') === '1') {
      localStorage.removeItem('paymentInProgress');
      showSuccess();
    }
  } catch(e){}
});

/* show success UI, play sound, vibrate */
function showSuccess(){
  popup.style.display = 'none';
  mainPage.style.display = 'none';
  successPage.style.display = 'block';
  // play sound (must be allowed because user gesture triggered UPI flow previously)
  try { successSound.currentTime = 0; successSound.play().catch(()=>{}); } catch(e){}
  // vibration pattern
  if(navigator.vibrate) navigator.vibrate([30,20,30]);
}

/* defensive: if user opens page on desktop - UPI won't work */
function isMobile(){
  return /Android|iPhone|iPad|iPod/i.test(navigator.userAgent);
}

if(!isMobile()){
  // Show a user-friendly alert for desktop users
  payNow.addEventListener('click', ()=> {
    setTimeout(()=>{ // popup already opened - add note
      const note = document.createElement('div');
      note.style.marginTop = '12px';
      note.style.color = '#b33';
      note.style.fontSize = '13px';
      note.textContent = 'Note: UPI deep links work only on mobile devices. Open this page on your phone to pay.';
      const popupCard = document.querySelector('.popup');
      if(popupCard && !popupCard.querySelector('.desktop-note')) {
        note.className='desktop-note';
        popupCard.appendChild(note);
      }
    },120);
  });
}

/* small debug in console */
console.log('UPI link example:', buildUpiUri());
</script>
</body>
</html>
